{% extends 'base.html' %}
{% load static %}

{% block title %}Subscribe - YouTube Streamer{% endblock %}

{% block content %}
<style>
  /* ==================== Subscription Container ==================== */
  .subscription-container {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
    min-height: 100vh;
    padding: 3rem 0;
    animation: fadeIn 0.6s ease-out;
  }

  /* ==================== Page Header ==================== */
  .subscription-header {
    text-align: center;
    color: white;
    margin-bottom: 3rem;
  }

  .subscription-title {
    font-size: 2.5rem;
    font-weight: 900;
    margin-bottom: 0.75rem;
    letter-spacing: -0.5px;
  }

  .subscription-subtitle {
    font-size: 1.1rem;
    opacity: 0.9;
    font-weight: 500;
  }

  /* ==================== Current Plan Info ==================== */
  .current-plan-info {
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 2.5rem;
    border-left: 4px solid var(--success-color);
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.2);
  }

  .current-plan-badge {
    background: rgba(16, 185, 129, 0.1);
    color: var(--success-color);
    padding: 1rem;
    border-radius: 10px;
    border-left: 4px solid var(--success-color);
  }

  .current-plan-title {
    font-weight: 800;
    font-size: 0.95rem;
    color: #22543d;
    margin-bottom: 0.75rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .current-plan-details {
    font-size: 0.9rem;
    color: #2d3748;
    line-height: 1.8;
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
  }

  .plan-detail-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  /* ==================== Plans Grid ==================== */
  .plans-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-bottom: 3rem;
  }

  /* ==================== Plan Card ==================== */
  .plan-card {
    background: white;
    border-radius: 16px;
    padding: 2rem;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    transition: var(--transition-smooth);
    position: relative;
    border: 2px solid transparent;
    display: flex;
    flex-direction: column;
  }

  .plan-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 50px rgba(99, 102, 241, 0.2);
    border-color: var(--primary-light);
  }

  .plan-card.active {
    border-color: var(--success-color);
    
    box-shadow: 0 15px 40px rgba(99, 102, 241, 0.2);
  }

  .plan-badge {
    position: absolute;
    top: -12px;
    right: 20px;
    background: linear-gradient(135deg, #198754, #198754);
    color: white;
    padding: 0.4rem 1rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  /* ==================== Plan Header ==================== */
  .plan-header {
    text-align: center;
    margin-bottom: 2rem;
    border-bottom: 2px solid #edf2f7;
    padding-bottom: 1.5rem;
  }

  .plan-name {
    font-size: 1.4rem;
    font-weight: 800;
    color: #2d3748;
    margin-bottom: 0.75rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
  }

  .plan-price {
    font-size: 2.75rem;
    font-weight: 900;
    color: var(--primary-color);
    margin-bottom: 0.5rem;
    letter-spacing: -1px;
  }

  .plan-price small {
    font-size: 0.95rem;
    color: #718096;
    font-weight: 500;
  }

  /* ==================== Plan Features ==================== */
  .plan-features {
    list-style: none;
    padding: 0;
    margin: 1.5rem 0;
    flex: 1;
  }

  .plan-features li {
    padding: 0.75rem 0;
    color: #4a5568;
    border-bottom: 1px solid #edf2f7;
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    font-size: 0.95rem;
  }

  .plan-features li:last-child {
    border-bottom: none;
  }

  .plan-features li:before {
    content: "‚úì";
    color: var(--success-color);
    font-weight: 900;
    font-size: 1.1rem;
    flex-shrink: 0;
    margin-top: 0.1rem;
  }

  .feature-highlight {
    color: var(--primary-color);
    font-weight: 700;
  }

  /* ==================== Plan Actions ==================== */
  .plan-action {
    margin-top: 2rem;
    text-align: center;
  }

  .btn-subscribe {
    padding: 0.9rem 2rem;
    border: none;
    border-radius: 10px;
    font-size: 0.95rem;
    font-weight: 700;
    cursor: pointer;
    transition: var(--transition-smooth);
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    width: 100%;
  }

  .btn-subscribe-primary {
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
    color: white;
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
  }

  .btn-subscribe-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 35px rgba(99, 102, 241, 0.4);
    color: white;
  }

  .btn-subscribe-secondary {
    background: #edf2f7;
    color: #2d3748;
    border: 2px solid #cbd5e0;
    cursor: not-allowed;
  }

  .btn-subscribe-secondary:hover {
    background: #e2e8f0;
  }

  /* ==================== Current Plan Indicator ==================== */
  .current-plan-label {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    background: rgba(16, 185, 129, 0.1);
    color: var(--success-color);
    padding: 0.4rem 0.8rem;
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    margin-bottom: 0.75rem;
  }

  /* ==================== FAQ Section ==================== */
  .faq-container {
    background: white;
    border-radius: 16px;
    padding: 2.5rem;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  }

  .faq-title {
    font-size: 1.5rem;
    font-weight: 800;
    color: #2d3748;
    margin-bottom: 2rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .faq-item {
    margin-bottom: 1.75rem;
    padding-bottom: 1.75rem;
    border-bottom: 1px solid #edf2f7;
  }

  .faq-item:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
  }

  .faq-question {
    font-weight: 800;
    color: #2d3748;
    font-size: 0.95rem;
    margin-bottom: 0.75rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .faq-answer {
    color: #4a5568;
    font-size: 0.9rem;
    line-height: 1.7;
  }

  /* ==================== Payment Methods ==================== */
  .payment-methods {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(236, 72, 153, 0.05) 100%);
    border-left: 4px solid var(--primary-color);
    padding: 1.5rem;
    border-radius: 10px;
    margin-top: 1.5rem;
  }

  .payment-methods-title {
    font-weight: 700;
    color: #2d3748;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .payment-methods-list {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
  }

  .payment-method-item {
    background: white;
    padding: 0.6rem 1rem;
    border-radius: 8px;
    font-size: 0.85rem;
    color: #4a5568;
    border: 1px solid var(--border-color);
  }

  /* ==================== Container ==================== */
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  /* ==================== Animations ==================== */
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  /* ==================== Responsive Design ==================== */
  @media (max-width: 992px) {
    .plans-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .subscription-title {
      font-size: 2rem;
    }
  }

  @media (max-width: 768px) {
    .subscription-container {
      padding: 2rem 0;
    }

    .subscription-title {
      font-size: 1.75rem;
    }

    .subscription-subtitle {
      font-size: 1rem;
    }

    .plans-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .plan-card {
      padding: 1.75rem;
    }

    .plan-price {
      font-size: 2.25rem;
    }

    .faq-container {
      padding: 1.75rem;
    }

    .current-plan-details {
      flex-direction: column;
      gap: 0.75rem;
    }

    .payment-methods-list {
      flex-direction: column;
    }

    .payment-method-item {
      width: 100%;
    }
  }

  @media (max-width: 480px) {
    .subscription-container {
      padding: 1.5rem 0;
    }

    .subscription-title {
      font-size: 1.5rem;
    }

    .subscription-header {
      margin-bottom: 2rem;
    }

    .plan-card {
      padding: 1.5rem;
    }

    .plan-name {
      font-size: 1.2rem;
    }

    .plan-price {
      font-size: 2rem;
    }

    .plan-features li {
      font-size: 0.9rem;
      padding: 0.65rem 0;
    }

    .btn-subscribe {
      padding: 0.8rem 1.5rem;
      font-size: 0.9rem;
    }

    .faq-container {
      padding: 1.25rem;
    }

    .faq-title {
      font-size: 1.25rem;
    }

    .container {
      padding: 0 1rem;
    }
  }
</style>

<div class="subscription-container">
  <div class="container">
    <!-- Page Header -->
    <div class="subscription-header">
      <h1 class="subscription-title">Choose Your Plan</h1>
      <p class="subscription-subtitle">Select the perfect plan for your streaming needs</p>
    </div>

    <!-- Current Plan Info -->
    {% if active_subscription %}
      <div class="current-plan-info">
        <div class="current-plan-badge">
          <div class="current-plan-title">
            <i class="bi bi-check-circle"></i>
            Current Plan: <strong>{{ active_subscription.get_plan_type_display }}</strong>
          </div>
          <div class="current-plan-details">
            <div class="plan-detail-item">
              <i class="bi bi-hdd"></i>
              <span><strong>Storage:</strong> {{ active_subscription.get_storage_limit_display }} GB</span>
            </div>
            <div class="plan-detail-item">
              <i class="bi bi-calendar-event"></i>
              <span><strong>Expires:</strong> {{ active_subscription.end_date|date:"M d, Y" }}</span>
            </div>
            <div class="plan-detail-item">
              <i class="bi bi-check2-circle"></i>
              <span><strong>Status:</strong> Active</span>
            </div>
          </div>
        </div>
      </div>
    {% endif %}

    <!-- Plans Grid -->
    <div class="plans-grid">
      <!-- One Day Plan -->
      <div class="plan-card {% if active_subscription.plan_type == 'oneday' %}active{% endif %}" >
        {% if active_subscription.plan_type == 'oneday' and active_subscription.is_active %}
          <div class="plan-badge">Current Plan</div>
        {% endif %}

        <div class="plan-header" >
          {% if active_subscription.plan_type == 'oneday' and active_subscription.is_active %}
            <div class="current-plan-label">
              <i class="bi bi-check-circle"></i> Active
            </div>
          {% endif %}
          <div class="plan-name">üìÖ One Day Plan</div>
          <div class="plan-price">‚Çπ49<small>/day</small></div>
        </div>

        <ul class="plan-features">
          <li><span class="feature-highlight">1 Stream</span> at a time</li>
          <li><i class="bi bi-hdd"></i> <span class="feature-highlight">0.5 GB</span> Storage</li>
          <li><i class="bi bi-play-circle"></i> YouTube Integration</li>
          <li><i class="bi bi-headset"></i> Priority Support</li>
          <li><i class="bi bi-arrow-repeat"></i> Daily Renewal</li>
        </ul>

        <div class="plan-action">
          {% if active_subscription.plan_type == 'oneday' and active_subscription.is_active %}
            <button class="btn-subscribe btn-subscribe-secondary" disabled>
              <i class="bi bi-check2"></i> Current Plan
            </button>
          {% else %}
            <a href="{% url 'create_order' 'oneday' %}" class="btn-subscribe btn-subscribe-primary">
              <i class="bi bi-credit-card"></i> Subscribe Now
            </a>
          {% endif %}
        </div>
      </div>

      <!-- Monthly Plan -->
      <div class="plan-card {% if active_subscription.plan_type == 'monthly' %}active{% endif %}">
        {% if active_subscription.plan_type == 'monthly' and active_subscription.is_active %}
          <div class="plan-badge">Current Plan</div>
        {% endif %}

        <div class="plan-header" >
          {% if active_subscription.plan_type == 'monthly' and active_subscription.is_active %}
            <div class="current-plan-label">
              <i class="bi bi-check-circle"></i> Active
            </div>
          {% endif %}
          <div class="plan-name">üìÖ Monthly Plan</div>
          <div class="plan-price">‚Çπ499<small>/month</small></div>
        </div>

        <ul class="plan-features">
          <li><span class="feature-highlight">1 Stream</span> at a time</li>
          <li><i class="bi bi-hdd"></i> <span class="feature-highlight">1 GB</span> Storage</li>
          <li><i class="bi bi-play-circle"></i> YouTube Integration</li>
          <li><i class="bi bi-headset"></i> Priority Support</li>
          <li><i class="bi bi-arrow-repeat"></i> Monthly Renewal</li>
        </ul>

        <div class="plan-action">
          {% if active_subscription.plan_type == 'monthly' and active_subscription.is_active %}
            <button class="btn-subscribe btn-subscribe-secondary" disabled>
              <i class="bi bi-check2"></i> Current Plan
            </button>
          {% else %}
            <a href="{% url 'create_order' 'monthly' %}" class="btn-subscribe btn-subscribe-primary">
              <i class="bi bi-credit-card"></i> Subscribe Now
            </a>
          {% endif %}
        </div>
      </div>

      <!-- Annual Plan -->
      <div class="plan-card {% if active_subscription.plan_type == 'annual' %}active{% endif %}">
        {% if active_subscription.plan_type == 'annual' and active_subscription.is_active %}
          <div class="plan-badge">Current Plan</div>
        {% endif %}

        <div class="plan-header">
          {% if active_subscription.plan_type == 'annual' and active_subscription.is_active %}
            <div class="current-plan-label">
              <i class="bi bi-check-circle"></i> Active
            </div>
          {% endif %}
          <div class="plan-name">‚≠ê Annual Plan</div>
          <div class="plan-price">‚Çπ3,999<small>/year</small></div>
        </div>

        <ul class="plan-features">
          <li><span class="feature-highlight">Up to 3 Streams</span> at a time</li>
          <li><i class="bi bi-hdd"></i> <span class="feature-highlight">2 GB</span> Storage</li>
          <li><i class="bi bi-play-circle"></i> YouTube Integration</li>
          <li><i class="bi bi-headset"></i> Priority Support</li>
          <li><i class="bi bi-percent"></i> <span class="feature-highlight">Save 17%</span> vs Monthly</li>
        </ul>

        <div class="plan-action">
          {% if active_subscription.plan_type == 'annual' and active_subscription.is_active %}
            <button class="btn-subscribe btn-subscribe-secondary" disabled>
              <i class="bi bi-check2"></i> Current Plan
            </button>
          {% else %}
            <a href="{% url 'create_order' 'annual' %}" class="btn btn-primary">Subscribe Now</a>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- FAQ Section -->
    <div class="faq-container">
      <h2 class="faq-title">
        <i class="bi bi-question-circle"></i> Frequently Asked Questions
      </h2>

      <div class="faq-item">
        <div class="faq-question">
          <i class="bi bi-arrow-up-right"></i> Can I upgrade from Monthly to Annual?
        </div>
        <div class="faq-answer">
          Yes, you can upgrade from monthly to annual at any time. You'll be credited for the unused portion of your monthly plan and the difference will be charged for the annual plan.
        </div>
      </div>

      <div class="faq-item">
        <div class="faq-question">
          <i class="bi bi-exclamation-triangle"></i> What happens if I exceed my storage limit?
        </div>
        <div class="faq-answer">
          You won't be able to upload new media files until you free up storage by deleting existing files or upgrading to a plan with more storage capacity.
        </div>
      </div>

      <div class="faq-item">
        <div class="faq-question">
          <i class="bi bi-x-circle"></i> Can I cancel my subscription?
        </div>
        <div class="faq-answer">
          Yes, you can cancel anytime from your account settings. Your access will continue until the end of your current billing period. No refunds are issued for partial months.
        </div>
      </div>

      <div class="faq-item">
        <div class="faq-question">
          <i class="bi bi-shield-check"></i> Is my data secure?
        </div>
        <div class="faq-answer">
          Absolutely! All your media files are encrypted and stored securely on our servers. We use industry-standard security protocols to protect your data at all times.
        </div>
      </div>

      <div class="faq-item">
        <div class="faq-question">
          <i class="bi bi-info-circle"></i> What happens when my subscription expires?
        </div>
        <div class="faq-answer">
          When your subscription expires, you'll receive email reminders before it ends. After expiration, your streams will be paused. You'll need to renew your subscription to resume streaming.
        </div>
      </div>

      <!-- Payment Methods -->
      <div class="payment-methods">
        <div class="payment-methods-title">
          <i class="bi bi-credit-card"></i> Accepted Payment Methods
        </div>
        <div class="payment-methods-list">
          <div class="payment-method-item">
            <i class="bi bi-credit-card-2-front"></i> Credit/Debit Cards
          </div>
          <div class="payment-method-item">
            <i class="bi bi-phone"></i> UPI
          </div>
          <div class="payment-method-item">
            <i class="bi bi-bank"></i> Net Banking
          </div>
          <div class="payment-method-item">
            <i class="bi bi-wallet2"></i> Digital Wallets
          </div>
        </div>
        <p style="color: #718096; font-size: 0.85rem; margin-top: 1rem; margin-bottom: 0;">
          <strong>Powered by Razorpay</strong> - Secure payment processing with advanced fraud protection
        </p>
      </div>
    </div>
  </div>
</div>

{% endblock %}